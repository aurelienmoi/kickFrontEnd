{"version":3,"sources":["webpack:///./src/app/members/community/community.module.ts","webpack:///./src/app/members/community/community.page.html","webpack:///./src/app/members/community/community.page.scss","webpack:///./src/app/members/community/community.page.ts"],"names":[],"mappings":"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","file":"community-community-module.js","sourcesContent":["import { NavBarModule } from '../_layouts/nav-bar/nav-bar.module';\r\nimport { TopToolbarModule } from '../_layouts/top-toolbar/top-toolbar.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CommunityPage } from './community.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CommunityPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IonicModule,\r\n    FormsModule,\r\n    RouterModule.forChild(routes),\r\n    TopToolbarModule,\r\n    NavBarModule\r\n  ],\r\n  declarations: [CommunityPage]\r\n})\r\nexport class CommunityPageModule {}\r\n","module.exports = \"<ion-header>\\r\\n  <ion-toolbar class=\\\"kickBg\\\">\\r\\n    <ion-title class=\\\"icon whiteSmoke\\\">Communaut√©</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button routerLink=\\\"/dashboard\\\" class=\\\"lightKick\\\" autoHide='false'>\\r\\n        <ion-icon class=\\\"settingBtn\\\" name=\\\"ios-arrow-forward\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content id=\\\"yellowBg\\\">\\r\\n  <div class=\\\"ion-text-center mainDiv\\\">\\r\\n      <ion-item class=\\\"transparentToolbar\\\" *ngFor=\\\"let user of users\\\">\\r\\n        <div class=\\\"avatarContainer\\\"><img src=\\\"assets/img/bitmoji.png\\\" class=\\\"avatar\\\" /></div>\\r\\n        <ion-label><a class=\\\"titleColor\\\" [routerLink]=\\\"['/contactDashboard',user._id]\\\">{{user.username}}</a></ion-label>\\r\\n\\r\\n        <ion-button color=\\\"light\\\" fill=\\\"clear\\\" *ngIf=\\\"!checkInArray(userArr,user._id)\\\" (click)=\\\"followUser(user)\\\">\\r\\n          <ion-icon name=\\\"add-circle-outline\\\" class=\\\"marginRight_5\\\"></ion-icon>\\r\\n        </ion-button>        \\r\\n        <ion-button color=\\\"light\\\" fill=\\\"clear\\\" *ngIf=\\\"checkInArray(userArr,user._id)\\\" (click)=\\\"unfollowUser(user)\\\">\\r\\n          <ion-icon name=\\\"close-circle\\\" class=\\\"marginRight_5\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n\\r\\n        <ion-button color=\\\"light\\\" fill=\\\"clear\\\" (click)=\\\"more(user._id, user.username)\\\">\\r\\n          <ion-icon src=\\\"assets/svg/ellipsis-vertical-sharp.svg\\\" class=\\\"marginRight_5\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n      </ion-item>\\r\\n  </div>\\r\\n\\r\\n  <app-nav-bar></app-nav-bar>\\r\\n\\r\\n</ion-content>\"","module.exports = \".moreCss {\\n  text-align: center; }\\n\\n.svgIcon {\\n  width: 20px;\\n  height: auto;\\n  fill: white; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVtYmVycy9jb21tdW5pdHkvRDpcXFdvcmtzcGFjZVxca2lja0FwcFxcS2lja2FwcC9zcmNcXGFwcFxcbWVtYmVyc1xcY29tbXVuaXR5XFxjb21tdW5pdHkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQWlCLEVBQUE7O0FBR3JCO0VBQ0ksV0FBVTtFQUFFLFlBQVc7RUFBRSxXQUFVLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9tZW1iZXJzL2NvbW11bml0eS9jb21tdW5pdHkucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vcmVDc3Mge1xyXG4gICAgdGV4dC1hbGlnbjpjZW50ZXI7XHJcbn1cclxuXHJcbi5zdmdJY29uIHtcclxuICAgIHdpZHRoOjIwcHg7IGhlaWdodDphdXRvOyBmaWxsOndoaXRlO1xyXG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { UsersService } from './../../services/users.service';\r\nimport * as _ from 'lodash';\r\nimport { AuthenticationService } from '../../services/authentication.service';\r\nimport * as io from 'socket.io-client';\r\nlet baseUrl = \"https://https://kickserver.xyz\"\r\nimport { ModalController, ActionSheetController } from '@ionic/angular';\r\nimport { MessagingPage } from './../../members/messaging/messaging.page';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-community',\r\n  templateUrl: './community.page.html',\r\n  styleUrls: ['./community.page.scss'],\r\n})\r\nexport class CommunityPage implements OnInit {\r\n\r\n  users = [];\r\n  socket : any;\r\n  loggedInUser : any;\r\n  userArr=[];\r\n\r\n  constructor(public actionSheetController: ActionSheetController, \r\n              private usersService : UsersService, \r\n              private authService : AuthenticationService, \r\n              public modalController: ModalController,\r\n              private router : Router) {\r\n    this.socket = io(`${baseUrl}`);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loggedInUser = this.authService.userData;\r\n    this.getUsers();\r\n    this.getUser();\r\n    this.socket.on('refreshPage', ()=>{\r\n      this.getUsers();\r\n      this.getUser();\r\n    })\r\n  }\r\n\r\n  getUsers () {\r\n    this.usersService.getAllUsers().subscribe (data =>{\r\n      _.remove(data.result, {username : this.loggedInUser.username});\r\n      this.users=data.result;\r\n      console.log(this.users);\r\n  });\r\n  }\r\n\r\n  getUser () {\r\n    this.loggedInUser = this.authService.userData;\r\n    console.log(this.loggedInUser);\r\n    this.usersService.getUserById(this.loggedInUser.id).subscribe (data =>{\r\n      this.userArr=data.result.following;\r\n      console.log(data);\r\n    });\r\n  }\r\n\r\n  checkInArray(arr, id){\r\n    const result = _.find(arr,  ['userFollowed._id', id]);\r\n    if(result) {\r\n      return true;\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  followUser(user) {\r\n    console.log(typeof(user._id));\r\n    this.usersService.followUser(user._id).subscribe(data=> {\r\n      console.log(data);\r\n      this.socket.emit('refresh',{});\r\n    })\r\n  }\r\n\r\n  unfollowUser(user){\r\n  //  console.log(user);\r\n   \r\n    this.usersService.unfollowUser(user._id).subscribe(data => {\r\n      console.log(data);\r\n      this.socket.emit('refresh', {});\r\n    });\r\n  }\r\n\r\n  async presentModalMessaging(usernameEntering) {\r\n    const modal = await this.modalController.create({\r\n      component: MessagingPage,\r\n      componentProps: { \r\n        username : usernameEntering\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  async more(userId, username) {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: username,\r\n      cssClass: 'moreCss',\r\n      buttons: [{\r\n        text: 'Messages',\r\n        icon: 'ios-send',\r\n        handler: () => {\r\n          this.presentModalMessaging(username)\r\n        }\r\n      },\r\n      {\r\n        text: 'Annuler',\r\n        icon: 'close',\r\n        role: 'cancel',\r\n        handler: () => {\r\n          console.log('Cancel clicked');\r\n        }\r\n      }]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n}\r\n"],"sourceRoot":""}